J :endfactorial
:factorial
PUSH 0
PUSH 1
POPR REX
POPR RDX
;end_params


PUSH 666
OUT
PUSH 0
POPR RAX
PUSHM [RAX]
OUT

PUSH 0
PUSHR RHX  ***
ADD        ***
POPR RAX
PUSHM [RAX]

PUSH 1
JE :if0x504000000290
PUSH 111
OUT
PUSH 0
POPR RAX
PUSHM [RAX]
PUSH 1
SUB
PUSH 1
POPR RAX
PUSHM [RAX]
POPR RHX
POPM [RAX]
PUSH 888
OUT
PUSH 1
POPR RAX
PUSHM [RAX]
OUT

PUSHR RHX ***
PUSH 3 ***
ADD ***
POPR RGX ***

PUSH 1
PUSHR RHX ***
ADD ***

POPR RAX
PUSHM [RAX]
PUSH 0
PUSHR RGX ***
ADD *** 
POPR RBX
POPM [RBX]

PUSHR RGX ***
POPR RHX ***

CALL :factorial

PUSHR RHX ***
PUSH 3    ***
SUB       ***
POPR RHX  ***

PUSH 0
POPR RAX
PUSHM [RAX]
MUL
PUSH 2
POPR RAX
PUSHM [RAX]
POPR RHX
POPM [RAX]
PUSH 777
OUT
PUSH 2
POPR RAX
PUSHM [RAX]
OUT
PUSH 2
POPR RAX
PUSHM [RAX]
RET
:if0x504000000290
PUSH 222
OUT
PUSH 1
RET
:endfactorial
;присваивание
PUSH 5
PUSH 0
POPR RBX
POPM [RBX]
CALL :factorial
PUSH 3
POPR RAX
PUSHM [RAX]
POPR RHX
POPM [RAX]
PUSH 3
POPR RAX
PUSHM [RAX]
OUT
HLT